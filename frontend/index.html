<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Panel uÅ¼ytkownika</title>
  <script defer src="/static/app.js"></script>
  <link rel="stylesheet" href="/static/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      if (!token) {
        window.location.href = "/login";
      }
    });
  </script>
</head>
<body>
  <h1>ğŸ“Š Panel Integracji Danych</h1>

  <div class="top-bar">
    <span>ğŸ‘‹ Witaj, <strong id="user-name">...</strong></span>
    <button onclick="logout()">ğŸšª Wyloguj</button>
  </div>

  <section>
    <h2>ğŸ“¥ Import danych</h2>
    <select id="collection-import">
      <option value="industrial">PrzemysÅ‚</option>
      <option value="emissions">Emisje</option>
      <option value="wastewater">Åšcieki</option>
    </select>
    <input type="file" id="import-file">
    <button onclick="importData()">Importuj</button>
  </section>

  <section>
    <h2>ğŸ“¤ Eksport danych</h2>
    <select id="collection-export">
      <option value="industrial">PrzemysÅ‚</option>
      <option value="emissions">Emisje</option>
      <option value="wastewater">Åšcieki</option>
    </select>
    <select id="format-export">
      <option value="json">JSON</option>
      <option value="xml">XML</option>
      <option value="yaml">YAML</option>
    </select>
    <button onclick="exportData()">Eksportuj</button>
  </section>

  <section>
    <h2>ğŸ“Š Raport roczny</h2>
    <input type="number" id="report-year" placeholder="np. 2020" />
    <button onclick="generateReport()">PokaÅ¼ raport</button>
    <pre id="report-output"></pre>
  </section>

  <section>
    <h2>ğŸ” Korelacja: Produkcja vs Emisje</h2>
    <button onclick="checkCorrelation()">Oblicz korelacjÄ™</button>
    <pre id="correlation-output"></pre>
  </section>

  <section>
    <h2>ğŸŒ Dane z API zewnÄ™trznego</h2>
    <button onclick="fetchExternal()">Pobierz dane</button>
    <pre id="external-data"></pre>
  </section>

  <section>
    <h2>ğŸ“ˆ Wykresy (PNG z backendu)</h2>
    <img src="/charts/industrial" alt="Produkcja">
    <img src="/charts/emissions" alt="Emisje">
    <img src="/charts/wastewater" alt="Åšcieki">
  </section>

  <section>
    <h2>ğŸ“Š Interaktywny wykres z danych rocznych</h2>
    <input type="number" id="chart-year" placeholder="np. 2019">
    <button onclick="drawChart(document.getElementById('chart-year').value)">PokaÅ¼ wykres</button>
    <canvas id="myChart" width="800" height="400"></canvas>
  </section>
</body>
</html>
